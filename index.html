<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aiden_OS v4.0 | Titanium</title>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@500;700&family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #00f2ff;
            --bg: #020202;
            --card: rgba(20, 20, 20, 0.95);
            --border: rgba(255, 255, 255, 0.1);
            --text: #ffffff;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; cursor: crosshair; user-select: none; }
        body { font-family: 'Space Grotesk', sans-serif; background: var(--bg); color: var(--text); height: 100vh; overflow: hidden; }

        /* --- BOOT SEQUENCE --- */
        #boot-screen {
            position: fixed; inset: 0; background: #000; z-index: 10000;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            transition: opacity 1s ease;
        }
        .boot-text { font-family: 'Fira Code'; color: var(--primary); margin-top: 20px; font-size: 0.8rem; }

        /* --- LOGIN --- */
        #login-screen {
            position: fixed; inset: 0; background: radial-gradient(circle at center, #111, #000);
            z-index: 9999; display: none; align-items: center; justify-content: center;
        }
        .login-box { text-align: center; padding: 40px; border: 1px solid var(--border); border-radius: 24px; background: rgba(0,0,0,0.8); width: 320px; backdrop-filter: blur(20px); }
        .avatar { width: 80px; height: 80px; background: var(--primary); border-radius: 50%; margin: 0 auto 20px; box-shadow: 0 0 30px var(--primary); border: 4px solid #fff; }

        /* --- UI ELEMENTS --- */
        #os-interface { display: none; height: 100vh; flex-direction: column; }
        nav { height: 65px; display: flex; justify-content: space-between; align-items: center; padding: 0 30px; border-bottom: 1px solid var(--border); background: rgba(0,0,0,0.8); backdrop-filter: blur(15px); }
        .nav-btn { background: transparent; border: none; color: #777; padding: 10px 20px; cursor: pointer; font-weight: 700; transition: 0.3s; }
        .nav-btn.active { color: var(--primary); text-shadow: 0 0 10px var(--primary); }

        #desktop { display: flex; flex: 1; position: relative; overflow: hidden; background-image: radial-gradient(var(--border) 1px, transparent 1px); background-size: 30px 30px; }
        
        /* Sidebar Icons */
        .sidebar { width: 100px; border-right: 1px solid var(--border); display: flex; flex-direction: column; align-items: center; padding-top: 20px; gap: 30px; background: rgba(0,0,0,0.4); }
        .desktop-icon { text-align: center; width: 80px; font-size: 0.65rem; padding: 10px; border-radius: 10px; transition: 0.2s; }
        .desktop-icon:hover { background: rgba(255,255,255,0.05); }

        /* Draggable Files */
        .file-node {
            position: absolute; width: 100px; text-align: center; padding: 10px;
            border-radius: 8px; border: 1px solid transparent; transition: box-shadow 0.2s;
        }
        .file-node:hover { background: rgba(255,255,255,0.05); border-color: var(--border); }
        .file-node.selected { background: rgba(0, 242, 255, 0.1); border-color: var(--primary); box-shadow: 0 0 15px rgba(0, 242, 255, 0.2); }
        .file-node div { font-size: 2.5rem; margin-bottom: 5px; }
        .file-node span { font-size: 0.75rem; word-break: break-all; display: block; }

        /* Context Menu */
        #ctx-menu {
            position: fixed; background: #181818; border: 1px solid #333; 
            border-radius: 8px; padding: 5px 0; z-index: 10000; display: none;
            width: 160px; box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }
        .ctx-item { padding: 8px 15px; font-size: 0.8rem; color: #eee; cursor: pointer; transition: 0.2s; }
        .ctx-item:hover { background: var(--primary); color: #000; }

        /* VISUALIZER */
        #viz-container { width: 100%; height: 100px; margin-top: 20px; display: flex; align-items: flex-end; gap: 2px; }
        .viz-bar { flex: 1; background: var(--primary); min-height: 2px; transition: height 0.05s ease; }

        /* Pages */
        .page { position: absolute; inset: 0; padding: 40px; background: var(--bg); display: none; z-index: 10; overflow-y: auto; }
        .page.active { display: block; }

        footer { height: 35px; border-top: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center; padding: 0 20px; font-size: 0.7rem; font-family: 'Fira Code'; color: #444; background: #000; }
    </style>
</head>
<body oncontextmenu="showCtx(event)">

    <div id="boot-screen" onclick="startSystem()">
        <div class="avatar" style="width:120px; height:120px;"></div>
        <div style="font-size: 1.5rem; font-weight: bold;">AIDEN_<span style="color:var(--primary)">OS</span></div>
        <div class="boot-text" id="boot-status">CLICK TO INITIALIZE KERNEL</div>
    </div>

    <div id="login-screen">
        <div class="login-box">
            <div class="avatar"></div>
            <h3>Aiden Becker</h3>
            <p style="font-size: 0.6rem; opacity: 0.5; margin-bottom: 20px;">SYSTEM SECURE</p>
            <input type="password" id="pw" placeholder="PASSWORD" style="background:#111; border:1px solid #333; color:#fff; padding:10px; border-radius:8px; width:100%; text-align:center; outline:none;" onkeypress="if(event.key==='Enter') unlock()">
        </div>
    </div>

    <div id="ctx-menu">
        <div class="ctx-item" onclick="createNewFile()">New File</div>
        <div class="ctx-item" onclick="location.reload()">Restart OS</div>
        <div class="ctx-item" onclick="switchPage('themes')">Personalize</div>
    </div>

    <div id="os-interface">
        <nav>
            <div style="font-weight: 700;">AIDEN_OS <span style="color:var(--primary)">v4.0</span></div>
            <div class="nav-links">
                <button class="nav-btn active" onclick="switchPage('desktop')">DESKTOP</button>
                <button class="nav-btn" onclick="switchPage('music')">MUSIC</button>
                <button class="nav-btn" onclick="switchPage('themes')">THEMES</button>
            </div>
            <div id="clock">00:00:00</div>
        </nav>

        <main id="desktop" ondragover="allowDrop(event)" ondrop="drop(event)">
            <div class="sidebar">
                <div class="desktop-icon" id="trash-bin" ondragover="allowDrop(event)" ondrop="handleTrash(event)">
                    <div style="font-size:2rem">üóëÔ∏è</div>Trash
                </div>
            </div>

            </main>

        <div id="music" class="page">
            <h1>Audio Engine & Visualizer</h1>
            <div id="viz-container"></div>
            <div id="music-list" style="margin-top:30px;"></div>
        </div>

        <div id="themes" class="page">
            <h1>System Themes</h1>
            <div id="theme-grid" style="display:grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap:15px; margin-top:20px;"></div>
        </div>

        <footer>
            <div id="sys-msg">STATUS: OPTIMAL</div>
            <div>CPU: 0.2% | RAM: 1.1GB</div>
        </footer>
    </div>

    <script>
        let audioCtx, analyser, dataArray, source;

        // --- BOOT SEQUENCE ---
        function startSystem() {
            const status = document.getElementById('boot-status');
            status.innerText = "LOADING CORE MODULES...";
            
            // 1. UNIQUE BOOT SOUND (Synth)
            const audio = new (window.AudioContext || window.webkitAudioContext)();
            const osc = audio.createOscillator();
            const gain = audio.createGain();
            osc.connect(gain);
            gain.connect(audio.destination);
            osc.type = 'sine';
            osc.frequency.setValueAtTime(220, audio.currentTime);
            osc.frequency.exponentialRampToValueAtTime(880, audio.currentTime + 1);
            gain.gain.setValueAtTime(0.1, audio.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, audio.currentTime + 1);
            osc.start(); osc.stop(audio.currentTime + 1.5);

            // 2. VOICE SYNTHESIS
            const msg = new SpeechSynthesisUtterance("Booting Up Aiden OS");
            msg.rate = 0.9; msg.pitch = 0.8;
            window.speechSynthesis.speak(msg);

            setTimeout(() => {
                document.getElementById('boot-screen').style.opacity = '0';
                setTimeout(() => {
                    document.getElementById('boot-screen').style.display = 'none';
                    document.getElementById('login-screen').style.display = 'flex';
                }, 1000);
            }, 2000);
        }

        function unlock() {
            document.getElementById('login-screen').style.display = 'none';
            document.getElementById('os-interface').style.display = 'flex';
            initVisualizer();
            spawnFile(200, 100, "Project_A.exe", "üìÇ");
        }

        // --- FILE SYSTEM (WINDOWS STYLE) ---
        let fileCount = 0;
        function spawnFile(x, y, name, icon) {
            fileCount++;
            const id = 'file-' + fileCount;
            const div = document.createElement('div');
            div.className = 'file-node';
            div.id = id;
            div.draggable = true;
            div.style.left = x + 'px';
            div.style.top = y + 'px';
            div.innerHTML = `<div>${icon}</div><span>${name}</span>`;
            
            div.ondblclick = () => alert(`File: ${name}\nSize: 4.2KB\nPermissions: Root`);
            div.onclick = (e) => {
                e.stopPropagation();
                document.querySelectorAll('.file-node').forEach(f => f.classList.remove('selected'));
                div.classList.add('selected');
            };
            div.ondragstart = (e) => e.dataTransfer.setData("text", e.target.id);
            
            document.getElementById('desktop').appendChild(div);
        }

        function createNewFile() {
            const x = Math.random() * (window.innerWidth - 300) + 120;
            const y = Math.random() * (window.innerHeight - 200) + 80;
            spawnFile(x, y, "New_Text_" + fileCount + ".txt", "üìÑ");
            hideCtx();
        }

        // --- CONTEXT MENU ---
        function showCtx(e) {
            e.preventDefault();
            const menu = document.getElementById('ctx-menu');
            menu.style.display = 'block';
            menu.style.left = e.clientX + 'px';
            menu.style.top = e.clientY + 'px';
        }
        function hideCtx() { document.getElementById('ctx-menu').style.display = 'none'; }
        document.addEventListener('click', hideCtx);

        // --- DRAG & DROP ---
        function allowDrop(e) { e.preventDefault(); }
        function drop(e) {
            e.preventDefault();
            const id = e.dataTransfer.getData("text");
            const el = document.getElementById(id);
            if(el) {
                el.style.left = e.clientX - 50 + 'px';
                el.style.top = e.clientY - 50 + 'px';
            }
        }
        function handleTrash(e) {
            e.preventDefault();
            const id = e.dataTransfer.getData("text");
            const el = document.getElementById(id);
            if(el) el.remove();
            document.getElementById('sys-msg').innerText = "STATUS: FILE DELETED";
        }

        // --- VISUALIZER ---
        function initVisualizer() {
            const container = document.getElementById('viz-container');
            for(let i=0; i<64; i++) {
                const bar = document.createElement('div');
                bar.className = 'viz-bar';
                container.appendChild(bar);
            }
        }

        function setupAudioSystem(audioElement) {
            if(!audioCtx) {
                audioCtx = new (window.AudioContext || window.webkitAudioContext)();
                analyser = audioCtx.createAnalyser();
                analyser.fftSize = 128;
                dataArray = new Uint8Array(analyser.frequencyBinCount);
            }
            if (source) source.disconnect();
            source = audioCtx.createMediaElementSource(audioElement);
            source.connect(analyser);
            analyser.connect(audioCtx.destination);
            animateViz();
        }

        function animateViz() {
            analyser.getByteFrequencyData(dataArray);
            const bars = document.querySelectorAll('.viz-bar');
            bars.forEach((bar, i) => {
                const val = dataArray[i] / 2;
                bar.style.height = val + 'px';
                bar.style.opacity = 0.2 + (val / 100);
            });
            requestAnimationFrame(animateViz);
        }

        // --- MUSIC LIST ---
        const tracks = [
            { t: "Smells Like Teen Spirit", a: "Nirvana", f: "music/nirvana.mp3", i: "https://upload.wikimedia.org/wikipedia/en/b/b7/NirvanaNevermindalbumcover.jpg" },
            { t: "On Melancholy Hill", a: "Gorillaz", f: "music/gorillaz.mp3", i: "https://upload.wikimedia.org/wikipedia/en/d/d1/Plasticbeach452.jpg" },
            { t: "American Idiot", a: "Green Day", f: "music/greenday.mp3", i: "https://upload.wikimedia.org/wikipedia/en/e/ed/Green_Day_-_American_Idiot_album_cover.png" }
        ];

        const mList = document.getElementById('music-list');
        tracks.forEach(tr => {
            const d = document.createElement('div');
            d.style.cssText = "display:flex; align-items:center; gap:20px; background:#111; padding:15px; border-radius:12px; margin-bottom:10px;";
            d.innerHTML = `<img src="${tr.i}" style="width:50px; border-radius:5px;"><div><b>${tr.t}</b><br><small>${tr.a}</small></div>
                           <audio controls src="${tr.f}" onplay="setupAudioSystem(this)" style="flex:1; filter:invert(1)"></audio>`;
            mList.appendChild(d);
        });

        // --- THEMES (30 PRESETS) ---
        const themes = [
            {n:"Nirvana", c:"#00f2ff"}, {n:"Vaporwave", c:"#ff71ce"}, {n:"Matrix", c:"#00ff41"}, 
            {n:"Blood", c:"#ff0000"}, {n:"Gold", c:"#ffcc00"}, {n:"Lava", c:"#ff4400"},
            {n:"Emerald", c:"#00ff88"}, {n:"Sunset", c:"#ff5e00"}, {n:"Midnight", c:"#191970"},
            {n:"Sakura", c:"#ffb7c5"}, {n:"Grape", c:"#cc00ff"}, {n:"Toxic", c:"#adff2f"}
            // Add more as needed
        ];
        const tGrid = document.getElementById('theme-grid');
        themes.forEach(t => {
            const item = document.createElement('div');
            item.style.cssText = `background:#111; padding:15px; border:1px solid #333; border-radius:10px; text-align:center; cursor:pointer`;
            item.innerHTML = `<div style="height:30px; background:${t.c}; border-radius:5px; margin-bottom:10px"></div>${t.n}`;
            item.onclick = () => { document.documentElement.style.setProperty('--primary', t.c); };
            tGrid.appendChild(item);
        });

        function switchPage(id) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            if(id !== 'desktop') document.getElementById(id).classList.add('active');
            event.currentTarget.classList.add('active');
        }

        setInterval(() => { document.getElementById('clock').innerText = new Date().toLocaleTimeString(); }, 1000);
    </script>
</body>
</html>
