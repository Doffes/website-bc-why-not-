<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>DEAD ZONE REDUX</title>
    <style>
        :root { --neon: #ff003c; --cyan: #00f2ff; --zombie: #39ff14; --bg: #020205; }
        body { margin: 0; background: #000; color: #fff; font-family: 'Courier New', monospace; overflow: hidden; user-select: none; }
        
        #fade-overlay {
            position: fixed; inset: 0; background: #000; z-index: 1000;
            pointer-events: none; opacity: 0; transition: opacity 0.6s ease;
        }

        .vhs-overlay {
            position: fixed; inset: 0; pointer-events: none; z-index: 500;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.1) 50%), 
                        linear-gradient(90deg, rgba(255, 0, 0, 0.03), rgba(0, 255, 0, 0.01), rgba(0, 0, 255, 0.03));
            background-size: 100% 3px, 3px 100%; opacity: 0.5;
        }

        #ui-layer { position: absolute; inset: 0; display: flex; justify-content: center; align-items: center; z-index: 100; background: rgba(0,0,0,0.85); }
        .menu-card { background: #050508; padding: 40px; border: 1px solid #222; width: 500px; text-align: center; border-top: 3px solid var(--neon); }
        
        h1 { font-size: 38px; letter-spacing: 10px; margin: 0; text-shadow: 0 0 15px var(--neon); }
        .sub { color: var(--cyan); font-size: 10px; letter-spacing: 4px; margin-bottom: 30px; }

        button { 
            width: 100%; padding: 15px; margin: 8px 0; border: 1px solid #333; 
            background: #000; color: #fff; cursor: pointer; font-size: 12px; 
            letter-spacing: 2px; text-transform: uppercase; transition: 0.2s;
        }
        button:hover:not(:disabled) { background: #fff; color: #000; box-shadow: 0 0 15px #fff; }
        button.primary { border-color: var(--cyan); color: var(--cyan); font-weight: bold; }
        button.primary:hover { background: var(--cyan); color: #000; }

        #hud { position: absolute; top: 30px; left: 30px; z-index: 50; transition: opacity 0.3s; }
        .hp-bar { width: 200px; height: 4px; background: #111; border: 1px solid #333; margin-top: 5px;}
        .hp-fill { height: 100%; background: var(--neon); box-shadow: 0 0 10px var(--neon); transition: 0.2s; }

        #credits-scroll { height: 120px; overflow: hidden; position: relative; border: 1px solid #111; background: #000; padding: 10px; }
        .scroll-wrap { position: absolute; width: 100%; animation: scrollUp 15s linear infinite; }
        @keyframes scrollUp { 0% { top: 100%; } 100% { top: -150%; } }

        canvas { display: block; filter: contrast(1.1) brightness(1.1); }
        .hidden { display: none !important; }
        .grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 5px; margin: 15px 0; }
    </style>
</head>
<body onclick="Snd.init()">
    <div class="vhs-overlay"></div>
    <div id="fade-overlay"></div>
    
    <div id="hud" class="hidden">
        <div style="font-size: 9px; letter-spacing: 2px;">VITAL SIGNS</div>
        <div class="hp-bar"><div id="hp-fill" class="hp-fill"></div></div>
    </div>

    <div id="ui-layer">
        <div id="m-lang" class="menu-card">
            <h1>BOOT</h1>
            <div class="sub">SELECT LANGUAGE</div>
            <button onmouseover="Snd.ui('hover')" onclick="ui.setLang('EN')">English</button>
            <button onmouseover="Snd.ui('hover')" onclick="ui.setLang('ES')">Español</button>
            <button onmouseover="Snd.ui('hover')" onclick="ui.setLang('JA')">日本語</button>
        </div>

        <div id="m-main" class="menu-card hidden">
            <h1 data-t="title">DEAD ZONE</h1>
            <div class="sub">REMASTERED // AIDEN B.</div>
            <button onmouseover="Snd.ui('hover')" onclick="ui.nav('m-campaign')" data-t="btn_campaign">Deploy</button>
            <button onmouseover="Snd.ui('hover')" onclick="ui.setMode('endless')" data-t="btn_endless">Survival</button>
            <button onmouseover="Snd.ui('hover')" onclick="ui.nav('m-credits')" data-t="btn_credits">Credits</button>
        </div>

        <div id="m-campaign" class="menu-card hidden">
            <h1 data-t="sectors">SECTORS</h1>
            <div id="campaign-grid" class="grid"></div>
            <button onmouseover="Snd.ui('hover')" onclick="ui.nav('m-main')" data-t="back">Return</button>
        </div>

        <div id="m-class" class="menu-card hidden">
            <h1 data-t="choose_class">LOADOUT</h1>
            <button onmouseover="Snd.ui('hover')" onclick="game.launch('assault')" data-t="cls_1">Assault Rifle</button>
            <button onmouseover="Snd.ui('hover')" onclick="game.launch('tank')" data-t="cls_2">Shield Tank</button>
            <button onmouseover="Snd.ui('hover')" onclick="ui.nav('m-main')" data-t="back">Cancel</button>
        </div>

        <div id="m-fullversion" class="menu-card hidden">
            <h1 style="color: var(--cyan)">ACCESS DENIED</h1>
            <div class="sub" style="margin-top:10px;">SECTOR 06-20 ENCRYPTED</div>
            <p style="font-size: 14px; line-height: 1.6;">Go To The Real Website To Play The Full Game</p>
            <button class="primary" onclick="window.open('https://aiden-bs-games-deadzoneredux.vercel.app/', '_blank')">PLAY FULL GAME</button>
            <button onmouseover="Snd.ui('hover')" onclick="ui.nav('m-campaign')" data-t="back">Back to Sectors</button>
        </div>

        <div id="m-credits" class="menu-card hidden">
            <h1 data-t="btn_credits">CREDITS</h1>
            <div id="credits-scroll">
                <div class="scroll-wrap">
                    <p style="color:var(--neon)">LEAD DESIGNER</p><p>AIDEN BECKER</p>
                    <p style="color:var(--cyan)">AUDIO ENGINE</p><p>OSCILLATOR V3</p>
                    <p style="color:var(--zombie)">ART STYLE</p><p>NEON CYBERPUNK</p>
                    <p style="color:var(--zombie)">LEAD DEVELOPER</p><p>AIDEN BECKER</p>
                </div>
            </div>
            <button onmouseover="Snd.ui('hover')" onclick="ui.nav('m-main')" data-t="back" style="margin-top:15px;">Back</button>
        </div>
    </div>

    <canvas id="gameCanvas"></canvas>

<script>
    /* --- AUDIO ENGINE --- */
    const Snd = {
        ctx: null, mg: null,
        init() {
            if (this.ctx) return;
            this.ctx = new (window.AudioContext || window.webkitAudioContext)();
            this.mg = this.ctx.createGain(); this.mg.connect(this.ctx.destination);
        },
        osc(f, t, d, v, s=0) {
            if(!this.ctx) return;
            const o = this.ctx.createOscillator(); const g = this.ctx.createGain();
            o.type = t; o.frequency.setValueAtTime(f, this.ctx.currentTime);
            if(s) o.frequency.exponentialRampToValueAtTime(s, this.ctx.currentTime + d);
            g.gain.setValueAtTime(v, this.ctx.currentTime);
            g.gain.linearRampToValueAtTime(0, this.ctx.currentTime + d);
            o.connect(g); g.connect(this.mg);
            o.start(); o.stop(this.ctx.currentTime + d);
        },
        ui(type) {
            if(type==='hover') this.osc(800, 'sine', 0.05, 0.05);
            if(type==='click') this.osc(400, 'square', 0.1, 0.1, 100);
        },
        playSfx(t, cls) {
            if(t==='shoot') cls === 'assault' ? this.osc(400, 'square', 0.1, 0.2, 50) : this.osc(150, 'sawtooth', 0.2, 0.3, 20);
            if(t==='jump') this.osc(200, 'sine', 0.15, 0.1, 400);
            if(t==='hit') this.osc(60, 'sawtooth', 0.1, 0.4, 10);
            if(t==='hurt') this.osc(100, 'noise', 0.2, 0.2); 
        },
        music() {
            if(!this.ctx || this.looping) return;
            this.looping = true;
            let step = 0;
            const notes = [55, 55, 62, 55, 58, 55, 65, 55]; 
            setInterval(() => {
                if(game.active) {
                    this.osc(notes[step % 8], 'sawtooth', 0.2, 0.1);
                    if(step % 4 === 0) this.osc(100, 'sine', 0.1, 0.1); 
                    step++;
                }
            }, 200);
        }
    };

    const i18n = {
        EN: { title: "DEAD ZONE", btn_campaign: "CAMPAIGN", btn_endless: "SURVIVAL", btn_credits: "CREDITS", back: "BACK", choose_class: "LOADOUT", cls_1: "ASSAULT", cls_2: "TANK", sectors: "SECTORS" },
        ES: { title: "ZONA MUERTA", btn_campaign: "CAMPAÑA", btn_endless: "SUPERVIVENCIA", btn_credits: "CRÉDITOS", back: "VOLVER", choose_class: "CLASE", cls_1: "ASALTO", cls_2: "TANQUE", sectors: "SECTORES" },
        JA: { title: "デッドゾーン", btn_campaign: "キャンペーン", btn_endless: "サバイバル", btn_credits: "クレジット", back: "戻る", choose_class: "ロードアウト", cls_1: "アサルト", cls_2: "タンク", sectors: "セクター" }
    };

    const ui = {
        lang: 'EN', mode: 'campaign', mission: 1,
        setLang(l) { Snd.ui('click'); this.lang = l; document.querySelectorAll('[data-t]').forEach(el => el.innerText = i18n[l][el.getAttribute('data-t')]); this.nav('m-main'); },
        nav(id) { Snd.ui('click'); document.querySelectorAll('.menu-card').forEach(c => c.classList.add('hidden')); document.getElementById(id).classList.remove('hidden'); if(id === 'm-campaign') this.renderCampaign(); },
        renderCampaign() {
            const container = document.getElementById('campaign-grid'); container.innerHTML = '';
            for(let i=1; i<=20; i++) {
                const b = document.createElement('button');
                b.innerText = i <= game.progress ? i : 'X';
                b.disabled = i > game.progress;
                b.onmouseover = () => Snd.ui('hover');
                b.onclick = () => { 
                    Snd.ui('click');
                    // LIMIT CHECK: If level > 5, show full version screen
                    if (i > 5) {
                        this.nav('m-fullversion');
                    } else {
                        this.mission = i; 
                        this.mode = 'campaign'; 
                        this.nav('m-class'); 
                    }
                };
                container.appendChild(b);
            }
        },
        setMode(m) { Snd.ui('click'); this.mode = m; this.nav('m-class'); }
    };

    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    const resize = () => { canvas.width = window.innerWidth; canvas.height = window.innerHeight; };
    window.onresize = resize; resize();

    const game = {
        active: false, progress: parseInt(localStorage.getItem('dz_redux_v10')) || 1,
        player: null, zombies: [], bullets: [], cameraX: 0, shake: 0, groundY: 0,

        launch(cls) {
            Snd.ui('click'); Snd.music();
            this.active = true; this.zombies = []; this.bullets = []; this.groundY = canvas.height - 100;
            const stats = cls === 'assault' ? {hp:100, dmg:2, fire:120} : {hp:250, dmg:7, fire:450};
            this.player = { x: 200, y: this.groundY-70, vx:0, vy:0, ...stats, mHp: stats.hp, dir: 1, cls: cls };
            
            document.getElementById('ui-layer').classList.add('hidden');
            document.getElementById('hud').classList.remove('hidden');
            document.getElementById('hud').style.opacity = "1";
            this.loop();
        },

        async endLevel(menu) {
            this.active = false;
            document.getElementById('hud').style.opacity = "0";
            document.getElementById('fade-overlay').style.opacity = "1";
            
            await new Promise(r => setTimeout(r, 600));
            
            document.getElementById('hud').classList.add('hidden');
            document.getElementById('ui-layer').classList.remove('hidden');
            
            // REDIRECT TO FULL VERSION IF FINISHED LEVEL 5
            if (ui.mission >= 5) {
                ui.nav('m-fullversion');
            } else {
                ui.nav(menu);
            }
            
            document.getElementById('fade-overlay').style.opacity = "0";
        },

        update() {
            if(!this.active) return;
            const p = this.player;

            if(keys.KeyA) { p.vx -= 1.5; p.dir = -1; }
            if(keys.KeyD) { p.vx += 1.5; p.dir = 1; }
            if(keys.KeyW && p.y >= this.groundY - 71) { p.vy = -16; Snd.playSfx('jump'); }
            
            p.vx *= 0.85; p.vy += 0.8; p.x += p.vx; p.y += p.vy;
            if(p.y > this.groundY - 70) { p.y = this.groundY - 70; p.vy = 0; }

            this.cameraX += (p.x - canvas.width/3 - this.cameraX) * 0.1;
            this.shake *= 0.9;

            if(keys.Space && Date.now() - (p.lastShot||0) > p.fire) {
                this.bullets.push({x: p.x + (p.dir*20), y: p.y+25, vx: p.dir*35});
                p.lastShot = Date.now(); this.shake = 6; Snd.playSfx('shoot', p.cls);
            }

            if(Math.random() < 0.03 + (ui.mission*0.005)) {
                this.zombies.push({x: p.x + canvas.width, y: this.groundY-80, hp: 5+ui.mission});
            }

            this.bullets.forEach((b, bi) => {
                b.x += b.vx;
                this.zombies.forEach((z, zi) => {
                    if(Math.abs(b.x - z.x) < 40 && Math.abs(b.y - z.y) < 80) {
                        z.hp -= p.dmg; this.bullets.splice(bi, 1); Snd.playSfx('hit');
                        if(z.hp <= 0) this.zombies.splice(zi, 1);
                    }
                });
            });

            this.zombies.forEach(z => {
                z.x += (p.x > z.x ? 2.5 : -2.5);
                if(Math.abs(p.x - z.x) < 30) { p.hp -= 0.5; Snd.playSfx('hurt'); }
            });

            const goal = 2000 + (ui.mission * 1000);
            if(ui.mode === 'campaign' && p.x > goal) {
                if(ui.mission === this.progress) { 
                    this.progress++; 
                    localStorage.setItem('dz_redux_v10', this.progress); 
                }
                this.endLevel('m-campaign');
            }
            if(p.hp <= 0) { 
                this.active = false; 
                location.reload(); 
            }
            document.getElementById('hp-fill').style.width = (p.hp/p.mHp*100) + '%';
        },

        draw() {
            if(!this.active) return;
            ctx.fillStyle = '#020205'; ctx.fillRect(0, 0, canvas.width, canvas.height);
            for(let i=0; i<15; i++) {
                let bx = (i * 300) - (this.cameraX * 0.3) % 300;
                ctx.fillStyle = '#05050a'; ctx.fillRect(bx, 150, 180, canvas.height);
            }
            ctx.save(); ctx.translate((Math.random()-0.5)*this.shake, (Math.random()-0.5)*this.shake);
            ctx.fillStyle = '#08080c'; ctx.fillRect(0, this.groundY, canvas.width, 100);
            ctx.fillStyle = varColor('--neon'); ctx.globalAlpha = 0.3; ctx.fillRect(0, this.groundY, canvas.width, 2); ctx.globalAlpha = 1;

            const cx = this.cameraX;
            ctx.fillStyle = '#fff'; ctx.shadowBlur = 15; ctx.shadowColor = varColor('--cyan');
            ctx.fillRect(this.player.x - cx - 15, this.player.y, 30, 70);
            
            this.zombies.forEach(z => {
                ctx.fillStyle = '#000'; ctx.strokeStyle = varColor('--zombie'); ctx.lineWidth = 2;
                ctx.fillRect(z.x - cx - 20, z.y, 40, 80); ctx.strokeRect(z.x - cx - 20, z.y, 40, 80);
            });

            ctx.fillStyle = varColor('--cyan');
            this.bullets.forEach(b => ctx.fillRect(b.x - cx, b.y, 25, 2));
            ctx.restore();
        },

        loop() { if(!this.active) return; this.update(); this.draw(); requestAnimationFrame(() => this.loop()); }
    };

    function varColor(n) { return getComputedStyle(document.documentElement).getPropertyValue(n).trim(); }
    const keys = {}; window.onkeydown = e => keys[e.code] = true; window.onkeyup = e => keys[e.code] = false;
</script>
</body>
</html>
